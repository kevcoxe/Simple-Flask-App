<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Simple-flask-app by kevcoxe</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Simple-flask-app</h1>
        <h2>A simple flask tutorial</h2>

        <section id="downloads">
          <a href="https://github.com/kevcoxe/Simple-Flask-App/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/kevcoxe/Simple-Flask-App/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/kevcoxe/Simple-Flask-App" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to the simple Flask App.</h3>

<p>Before we get started here is what each color means for when you see the code blocks.</p>

<pre><code>This COLOR code means that the code is to be added
or already exists and does not need to be removed.</code>
<code class="old">This COLOR code means that the code is old and needs to be removed.</code>
<code class="new">This COLOR code means that the code is new and is to be added to the file.</code>
</pre>

<p>Let's get started creating a simple blog site with Flask. Start by creating a project directory.</p>

<pre><code>$ mkdir my-flask-app
$ cd my-flask-app
</code></pre>

<p>We will need to install a few things to get started. First we will need a python virtual environment. You can go <a href="http://flask.pocoo.org/docs/0.10/installation/#installation">here</a> for more in depth instructions. If on Mac OSX / Linux the command below should work for you.</p>

<pre><code>$ sudo easy_install virtualenv
</code></pre>
<p>OR</p>
<pre><code>$ sudo pip install virtualenv
</code></pre>

<p>To add the virtual environment directory do</p>

<pre><code>virtualenv venv
</code></pre>

<p>Cool now you have your virtual environment, let's start it up.</p>

<pre><code>$ . venv/bin/activate
</code></pre>

<p>Now that the python virtual environment is running go ahead and install Flask.</p>

<pre><code>$ pip install Flask
</code></pre>
OR
<pre><code>$ sudo pip install Flask
</code></pre>

<h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing flask</h3>
<p>OK now that you have everything set up it is time to start writing some flask code.</p>
<p>Start by creating a file called <code>app.py</code> in your favorite text editor, I will be using vim.</p>

<pre><code>$ vim app.py
</code></pre>

<p>Once inside of <code>app.py</code> add these lines of code.</p>

<pre><code>from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run(
        debug=True,
    )
</code></pre>

<p><a href="https://www.youtube.com/watch?v=wDajqW561KM">CONGRATULATIONS!</a> You have made a flask app! Now let's start it up.</p>

<pre><code>$ python app.py
</code></pre>

<p>By default it will run on your <a href="http://127.0.0.1:5000/">localhost</a> port 5000.</p>


<h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding HTML</h3>

<p>Alright so that's cool we have a working flask app, but it is still boring. Let's add some HTML and make it look nice.</p>

<p>Flask looks for the templates directory for html. So let's create it.</p>

<pre><code>$ mkdir templates
$ cd templates
</code></pre>

<p>I will be using a <a href="http://getbootstrap.com">Bootstrap</a> template for quick and easy setup. To download the bootstrap page I will be using you can use
<pre><code>$ curl 'http://getbootstrap.com/examples/jumbotron/index.html' > index.html
</code></pre>
OR
<pre><code>$ wget http://getbootstrap.com/examples/jumbotron/index.html
</code></pre>

<p>Otherwise you can go <a href="http://getbootstrap.com/examples/jumbotron/">here</a> view source and download the page and save it as <code>index.html</code>.</p>

<p>Once you have the <code>index.hmtl</code> you will need to change a few lines of code so that the style sheets and javascript files load. Inside of the <code>&lt;head&gt;</code> tag change these lines</p>

<p>For the favicon.</p>
<pre class="old"><code>&lt;link rel="icon" href="../../favicon.ico"&gt;
</code></pre>
<pre><code>&lt;link rel="icon" href="http://getbootstrap.com/favicon.ico"&gt;
</code></pre>

<p>For the base css.</p>
<pre class="old"><code>&lt;!-- Bootstrap core CSS --&gt;
&lt;link href="../../dist/css/bootstrap.min.css" rel="stylesheet"&gt;
</code></pre>
<pre><code>&lt;!-- Bootstrap core CSS --&gt;
&lt;link href="http://getbootstrap.com/dist/css/bootstrap.min.css"  rel="stylesheet"&gt;
</code></pre>

<p>For the custom css.</p>
<pre class="old"><code>&lt;!-- Custom styles for this template --&gt;
&lt;link href="jumbotron.css" rel="stylesheet"&gt;
</code></pre>
<pre><code>&lt;!-- Custom styles for this template --&gt;
&lt;link href="http://getbootstrap.com/examples/jumbotron/jumbotron.css"  rel="stylesheet"&gt;
</code></pre>

<p>For some javascript.</p>
<pre class="old"><code>&lt;!-- Just for debugging purposes. Don't actually copy these 2 lines! --&gt;
&lt;!--[if lt IE 9]&gt;&lt;script src="../../assets/js/ie8-responsive-file-warning.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;
&lt;script src="../../assets/js/ie-emulation-modes-warning.js"&gt;&lt;/script&gt;
</code></pre>
<pre><code>&lt;!-- Just for debugging purposes. Don't actually copy these 2 lines! --&gt;
&lt;!--[if lt IE 9]&gt;&lt;script src="http://getbootstrap.com/assets/js/ie8-responsive-file-warning.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;
&lt;script src="http://getbootstrap.com/assets/js/ie-emulation-modes-warning.js"&gt;&lt;/script&gt;
</code></pre>

<p>Next go to the end of the <code>&lt;body&gt;</code> tag and replace these lines.</p>

<p>For Bootstrap javascript.</p>
<pre class="old"><code>&lt;script src="../../dist/js/bootstrap.min.js"&gt;&lt;/script&gt;
</code></pre>
<pre><code>&lt;script src="http://getbootstrap.com/dist/js/bootstrap.min.js"&gt;&lt;/script&gt;
</code></pre>

<p>For Surface/desktop Windows 8 bug.</p>
<pre class="old"><code>&lt;script src="../../assets/js/ie10-viewport-bug-workaround.js"&gt;&lt;/script&gt;
</code></pre>
<pre><code>&lt;script src="http://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"&gt;&lt;/script&gt;
</code></pre>


<p>Alright now that we have our template ready let's load it. We will add these changes to our <code>app.py</code>.</p>

<pre><code>$ cd ../
$ vim app.py

from flask import Flask</code><code class="new">, render_template</code>
<code>
app = Flask(__name__)

@app.route('/')</code>
<code class="old">def hello_world():
    return 'Hello World!'</code>
<code class="new">def index():
    return render_template('index.html')</code><code>

if __name__ == '__main__':
    app.run(
        debug=True,
    )

</code></pre>

<p>Sweet! Reload your app and check it out!</p>

<h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Jinja Templates</h3>

<p>That <code>index.html</code> file is great but would be better if it was broken into a couple different files. Let's do that now.</p>

<p>Start by creating the file <code>base.html</code> in the templates directory.</p>

<pre><code>$ cd templates
$ vim base.html
</code></pre>

<p>Then add this to <code>base.html</code>.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
    &lt;!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags --&gt;
    &lt;meta name="description" content=""&gt;
    &lt;meta name="author" content=""&gt;
    &lt;link rel="icon" href="http://getbootstrap.com/favicon.ico"&gt;

    &lt;title&gt;Jumbotron Template for Bootstrap&lt;/title&gt;

    &lt;!-- Bootstrap core CSS --&gt;
    &lt;link href="http://getbootstrap.com/dist/css/bootstrap.min.css"  rel="stylesheet"&gt;

    &lt;!-- Custom styles for this template --&gt;
    &lt;link href="http://getbootstrap.com/examples/jumbotron/jumbotron.css"  rel="stylesheet"&gt;

    &lt;!-- Just for debugging purposes. Don't actually copy these 2 lines! --&gt;
    &lt;!--[if lt IE 9]&gt;&lt;script src="http://getbootstrap.com/assets/js/ie8-responsive-file-warning.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;
    &lt;script src="http://getbootstrap.com/assets/js/ie-emulation-modes-warning.js"&gt;&lt;/script&gt;

    &lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;
    &lt;!--[if lt IE 9]&gt;
      &lt;script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"&gt;&lt;/script&gt;
      &lt;script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"&gt;&lt;/script&gt;
    &lt;![endif]--&gt;
  &lt;/head&gt;

  &lt;body&gt;
    {% block body %}{% endblock %}
    &lt;!-- Bootstrap core JavaScript
    ================================================== --&gt;
    &lt;!-- Placed at the end of the document so the pages load faster --&gt;
    &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="http://getbootstrap.com/dist/js/bootstrap.min.js"&gt;&lt;/script&gt;
    &lt;!-- IE10 viewport hack for Surface/desktop Windows 8 bug --&gt;
    &lt;script src="http://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;

</code></pre>

<p>Next we will replace the contents of <code>index.html</code> with the code below.</p>

<pre><code>{% extends 'base.html' %}
{% block body %}
&lt;nav class="navbar navbar-inverse navbar-fixed-top"&gt;
    &lt;div class="container"&gt;
    &lt;div class="navbar-header"&gt;
        &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&gt;
        &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;a class="navbar-brand" href="/"&gt;Flask Posts&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="navbar" class="navbar-collapse collapse"&gt;
      &lt;ul class="nav navbar-nav"&gt;
        &lt;li class="active"&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
        &lt;li class=""&gt;&lt;a href="#"&gt;Write Post&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
&lt;/nav&gt;

&lt;!-- Main jumbotron for a primary marketing message or call to action --&gt;
&lt;div class="jumbotron"&gt;
    &lt;div class="container"&gt;
    &lt;h1&gt;My First Flask App&lt;/h1&gt;
    &lt;p&gt;Let's learn some Flask!&lt;/p&gt;
    &lt;p&gt;&lt;a class="btn btn-success btn-lg" href="#" role="button"&gt;Write Post&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class="container"&gt;
    &lt;!-- Example row of columns --&gt;
    &lt;div class="row"&gt;
    &lt;div class="col-md-12"&gt;
        &lt;div class="well"&gt;
            &lt;h2&gt;A Title&lt;/h2&gt;
            &lt;p&gt;Some content for this post.&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;/div&gt;

    &lt;hr&gt;

    &lt;footer&gt;
    &lt;p&gt;UMBC Hackers&lt;/p&gt;
    &lt;/footer&gt;
&lt;/div&gt; &lt;!-- /container --&gt;
{% endblock %}
</code></pre>

<p>OK so that was a lot of copy paste, but what did we get out of it? We just added Jinja templating.
The page is now grabbing data from multiple <code>HTML</code> files to create one page.</p>

<p>When <code>index.html</code> is loading it will see</p>

<pre><code>{% extends 'base.html' %}
{% block body %}
...
{% endblock %}
</code></pre>

<p>This tells the Jinja template to go look at <code>base.html</code> and find where we should put the "body block".
Looking in <code>base.html</code> we will see this line</p>

<pre><code>{% block body %}{% endblock %}
</code></pre>

<p>that shows where the "body block" should be loaded.</p>


<h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Dynamic Content From Data</h3>

<p>So now that we have a sample of a 'post' for our app let's feed data into our templates to display content.
We will modify our <code>index.html</code> so that it excepts an object named "posts".</p>

<pre><code>{% extends 'base.html' %}
{% block body %}
&lt;nav class="navbar navbar-inverse navbar-fixed-top"&gt;
    &lt;div class="container"&gt;
    &lt;div class="navbar-header"&gt;
        &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&gt;
        &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;a class="navbar-brand" href="/"&gt;Flask Posts&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="navbar" class="navbar-collapse collapse"&gt;
      &lt;ul class="nav navbar-nav"&gt;
        &lt;li class="active"&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
        &lt;li class=""&gt;&lt;a href="#"&gt;Write Post&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
&lt;/nav&gt;

&lt;!-- Main jumbotron for a primary marketing message or call to action --&gt;
&lt;div class="jumbotron"&gt;
    &lt;div class="container"&gt;
    &lt;h1&gt;My First Flask App&lt;/h1&gt;
    &lt;p&gt;Let's learn some Flask!&lt;/p&gt;
    &lt;p&gt;&lt;a class="btn btn-success btn-lg" href="#" role="button"&gt;Write Post&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class="container"&gt;
    &lt;!-- Example row of columns --&gt;
    &lt;div class="row"&gt;</code>
    <code class="new">{% for post in posts %}</code><code>
    &lt;div class="col-md-12"&gt;
        &lt;div class="well"&gt;</code>
            <code class="old">&lt;h2&gt;A Title&lt;/h2&gt;
            &lt;p&gt;Some content for this post.&lt;/p&gt;</code>
            <code class="new">&lt;h2&gt;{{ post['title'] }}&lt;/h2&gt;
            &lt;p&gt;{{ post['content'] }}&lt;/p&gt;</code><code>
        &lt;/div&gt;
    &lt;/div&gt;</code>
    <code class="new">{% endfor %}</code><code>
    &lt;/div&gt;

    &lt;hr&gt;

    &lt;footer&gt;
    &lt;p&gt;UMBC Hackers&lt;/p&gt;
    &lt;/footer&gt;
&lt;/div&gt; &lt;!-- /container --&gt;
{% endblock %}
</code></pre>

<p>OK now reload your app. Since we never passed in any posts nothing appears.</p>

<p>Time to create some posts. Open up our <code>app.py</code> and change it to look like this.</p>

<pre><code>from flask import Flask, render_template
app = Flask(__name__)

@app.route('/')
def index():</code>
    <code class="old">return render_template('index.html')</code>
    <code class="new">posts = [ 
        {'title':'Test 1','content':'This is the content for Test 1.'},
        {'title':'Test 2','content':'This is the content for Test 2.'},
        {'title':'Test 3','content':'This is the content for Test 3.'},
        ]
    return render_template('index.html', posts=posts)</code><code>

if __name__ == '__main__':
    app.run(
        debug=True,
    )
</code></pre>

<p>Cool so now we can pass in objects and use them to populate the HTML. Lets break our <code>index.html</code> up into even more files.</p>

<p>Create a new <code>HTML</code> file in the templates directory named <code>macros.html</code>.</p>

<pre><code>$ cd templates
$ vim macros.html

{% macro navbar() -%}
&lt;nav class="navbar navbar-inverse navbar-fixed-top"&gt;
    &lt;div class="container"&gt;
    &lt;div class="navbar-header"&gt;
        &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&gt;
        &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;a class="navbar-brand" href="/"&gt;Flask Posts&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="navbar" class="navbar-collapse collapse"&gt;
      &lt;ul class="nav navbar-nav"&gt;
        &lt;li class="active"&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
        &lt;li class=""&gt;&lt;a href="#"&gt;Write Post&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
&lt;/nav&gt;
{%- endmacro %}

{% macro list_items(posts) -%}
&lt;div class="row"&gt;
{% for post in posts %}
&lt;div class="col-md-12"&gt;
    &lt;div class="well"&gt;
        &lt;h2&gt;{{ post['title'] }}&lt;/h2&gt;
        &lt;p&gt;{{ post['content'] }}&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
{% endfor %}
&lt;/div&gt;
{%- endmacro %}

{% macro footer() -%}
&lt;footer&gt;
    &lt;p&gt;UMBC Hackers&lt;/p&gt;
&lt;/footer&gt;
{%- endmacro %}
</code></pre>

<p>Now we just need to modify our <code>index.html</code> so that it uses these macros.</p>

<pre><code>{% extends 'base.html' %}</code>
<code class="new">{% import 'macros.html' as macros %}</code>
<code>{% block body %}</code><code class="old">
&lt;nav class="navbar navbar-inverse navbar-fixed-top"&gt;
    &lt;div class="container"&gt;
    &lt;div class="navbar-header"&gt;
        &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&gt;
        &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;a class="navbar-brand" href="/"&gt;Flask Posts&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="navbar" class="navbar-collapse collapse"&gt;
      &lt;ul class="nav navbar-nav"&gt;
        &lt;li class="active"&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
        &lt;li class=""&gt;&lt;a href="#"&gt;Write Post&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
&lt;/nav&gt;</code>
<code class="new">&lt;!-- navbar from macros.hmtl --&gt;
{{ macros.navbar() }}</code><code>

&lt;!-- Main jumbotron for a primary marketing message or call to action --&gt;
&lt;div class="jumbotron"&gt;
    &lt;div class="container"&gt;
    &lt;h1&gt;My First Flask App&lt;/h1&gt;
    &lt;p&gt;Let's learn some Flask!&lt;/p&gt;
    &lt;p&gt;&lt;a class="btn btn-success btn-lg" href="#" role="button"&gt;Write Post&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class="container"&gt;</code>
    <code class="old">&lt;!-- Example row of columns --&gt;
    &lt;div class="row"&gt;
    {% for post in posts %}
    &lt;div class="col-md-12"&gt;
        &lt;div class="well"&gt;
            &lt;h2&gt;{{ post['title'] }}&lt;/h2&gt;
            &lt;p&gt;{{ post['content'] }}&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    {% endfor %}
    &lt;/div&gt;</code>
    <code class="new">{{ macros.list_items(posts=posts) }}</code><code>
    &lt;hr&gt;
    </code><code class="old">&lt;footer&gt;
    &lt;p&gt;UMBC Hackers&lt;/p&gt;
    &lt;/footer&gt;</code>
    <code class="new">{{ macros.footer() }}</code><code>
&lt;/div&gt; &lt;!-- /container --&gt;
{% endblock %}

</code></pre>

<p>So we have now replaced our 'navbar', 'post items', and 'footer' with Jinja tags that will go to our <code>macros.html</code> file and grab the content that is needed.</p>


<h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>SQLite3</h3>

<p>Let's add a database to our app. SQLite works well with Flask. If you need more info on how to set up SQLite check out <a href="http://www.tutorialspoint.com/sqlite/sqlite_installation.htm">this</a> page.</p>

<p>If you are using linux check your package manager for sqlite3.</p>

<p>If you are using Mac OSX and have homebrew then do the following.</p>
<pre><code>$ brew install sqlite3
</code></pre>
<p>If you do not have homebrew then you can download sqlite <a href="http://www.sqlite.org/download.html">here</a>.
And you can find instructions on how to get homebrew <a href="http://brew.sh">here</a>.</p>

<p>If on windows you can download it <a href="http://www.sqlite.org/download.html">here</a>.</p>

<p>Once you have SQLite you can create a database with the following command.</p>

<pre><code>$ sqlite3 my_database.db
sqlite&gt; create table my_posts (
   ...&gt; id integer primary key autoincrement,
   ...&gt; title text,
   ...&gt; content text
   ...&gt; );
sqlite&gt; .tables
my_posts
sqlite&gt; insert into my_posts values(null, "Test title", "This post was made from command line");
sqlite&gt; select * from my_posts;
1|Test title|This post was made from command line
sqlite&gt; .quit
</code></pre>

<p>If you did not see "my_posts" after the command <code>.tables</code> then the table was not created.
More information on how to create sqlite tables can be found <a href="https://www.sqlite.org/cli.html">here</a> or <a href="http://www.tutorialspoint.com/sqlite/sqlite_create_table.htm">here</a>.</p>

<p>You will now have a new file <code>my_database.db</code>.</p>

<p>We can now add the link to the database to our Flask app. We will now edit out <code>app.py</code> to look like this.</p>

<pre><code class="new">import sqlite3</code><code>
from flask import Flask, render_template</code><code class="new">, g, request, redirect</code><code>
app = Flask(__name__)</code>

<code class="new">DATABASE = 'my_database.db'</code><code>

@app.route('/')
def index():</code>
    <code class="old">posts = [ 
        {'title':'Test 1','content':'This is the content for Test 1.'},
        {'title':'Test 2','content':'This is the content for Test 2.'},
        {'title':'Test 3','content':'This is the content for Test 3.'},
        ]</code>
    <code class="new">posts = query_db('select * from my_posts')</code><code>
    return render_template('index.html', posts=posts)</code>

<code class="new"># delete items from the database
# using their 'id'
@app.route('/delete_post/&lt;int:id&gt;', methods = ['POST'])
def remove_post(id=0):
    delete_post(id)
    return redirect('/')

def delete_post(id):
    cur = g.db.execute('delete from my_posts where(id == "%s");' % (
        id,
        ))
    g.db.commit()

# insert a 'post' into the database
def insert_post(post):
    cur = g.db.execute('insert into my_posts values(%s,"%s","%s");' % (
        post['id'],
        post['title'],
        post['content'],
        ))
    g.db.commit()

# take a 'query' string and execute it
def query_db(query, args=(), one=False):
    cur = g.db.execute(query, args)
    rv = [dict((cur.description[idx][0], value)
               for idx, value in enumerate(row)) for row in cur.fetchall()]
    return (rv[0] if rv else None) if one else rv

# connect to the database
def connect_db():
    return sqlite3.connect(DATABASE)

@app.before_request
def before_request():
    g.db = connect_db()

@app.after_request
def after_request(response):
    g.db.close()
    return response</code><code>

if __name__ == '__main__':
    app.run(
        debug=True,
    )

</code></pre>

<p>Sweet! You have successfully connected to your sqlite database. If you reload the page you will see that
it now displays the post you created from the command line.</p>

<p>Let's add the ability to create a post. To start you will need to create a file <code>add_post.html</code> in the templates directory.</p>

<pre><code>$ cd templates
vim add_post.html

{% extends 'base.html' %}
{% import 'macros.html' as macros %}
{% block body %}
&lt;!-- navbar from macros.hmtl --&gt;
{{ macros.navbar() }}
&lt;div class="container"&gt;
&lt;!-- Main jumbotron for a primary marketing message or call to action --&gt;
&lt;div class="jumbotron"&gt;
  &lt;div class="container"&gt;
    &lt;h1&gt;Write A Post&lt;/h1&gt;
    &lt;p&gt;Enter the information below to post.&lt;/p&gt;
    &lt;form role="form" action="/write_post" method="post"&gt;
      &lt;div class="input-group input-group-lg"&gt;
        &lt;span class="input-group-addon" id="sizing-addon1"&gt;Title&lt;/span&gt;
        &lt;input type="text" class="form-control" placeholder="My Title" aria-describedby="sizing-addon1" name="title"&gt;
      &lt;/div&gt;
      &lt;div class="form-group"&gt;
        &lt;label for="comment"&gt;Content&lt;/label&gt;
        &lt;textarea class="form-control" rows="5" id="content" name="content"&gt;&lt;/textarea&gt;
      &lt;/div&gt;
      &lt;p&gt;&lt;input type="submit" class="btn btn-lg btn-success" value="post"&gt;&lt;/input&gt;&lt;/p&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;hr&gt;
{{ macros.footer() }}
&lt;/div&gt; &lt;!-- /container --&gt;
{% endblock %}
</code></pre>

<p>Now we need to add a route to our <code>app.py</code> that will link to <code>add_post.html</code> and we will need to add a route for "/write_post".</p>
<pre><code>import sqlite3
from flask import Flask, render_template, g, request, redirect
app = Flask(__name__)

DATABASE = 'my_database.db'

@app.route('/')
def index():
    posts = query_db('select * from my_posts')
    return render_template('index.html', posts=posts)</code>

<code class="new">@app.route('/start_post')
def form_post():
    return render_template('add_post.html')

@app.route('/write_post', methods = ['POST'])
def add_post():
    title = request.form['title']
    content = request.form['content']
    post = {'id':'null','title':title,'content':content}
    insert_post(post)
    return redirect('/')</code><code>

# delete items from the database
# using their 'id'
@app.route('/delete_post/&lt;int:id&gt;', methods = ['POST'])
def remove_post(id=0):
    delete_post(id)
    return redirect('/')

def delete_post(id):
    cur = g.db.execute('delete from my_posts where(id == "%s");' % (
        id,
        ))
    g.db.commit()

# insert a 'post' into the database
def insert_post(post):
    cur = g.db.execute('insert into my_posts values(%s,"%s","%s");' % (
        post['id'],
        post['title'],
        post['content'],
        ))
    g.db.commit()

# take a 'query' string and execute it
def query_db(query, args=(), one=False):
    cur = g.db.execute(query, args)
    rv = [dict((cur.description[idx][0], value)
               for idx, value in enumerate(row)) for row in cur.fetchall()]
    return (rv[0] if rv else None) if one else rv

# connect to the database
def connect_db():
    return sqlite3.connect(DATABASE)

@app.before_request
def before_request():
    g.db = connect_db()

@app.after_request
def after_request(response):
    g.db.close()
    return response

if __name__ == '__main__':
    app.run(
        debug=True,
    )

</code></pre>


<p>Oops! We need a way to get to our new page. Let's add some links to it. We will need to add a <code>href</code>
to our button in <code>index.html</code> and to the item in our 'navbar' in <code>macros.html</code>.</p>

index.html
<pre><code>{% extends 'base.html' %}
{% import 'macros.html' as macros %}
{% block body %}
&lt;!-- navbar from macros.hmtl --&gt;
{{ macros.navbar() }}

&lt;!-- Main jumbotron for a primary marketing message or call to action --&gt;
&lt;div class="jumbotron"&gt;
    &lt;div class="container"&gt;
    &lt;h1&gt;My First Flask App&lt;/h1&gt;
    &lt;p&gt;Let's learn some Flask!&lt;/p&gt;</code>
    <code class="old">&lt;p&gt;&lt;a class="btn btn-success btn-lg" href="#" role="button"&gt;Write Post&lt;/a&gt;&lt;/p&gt;</code>
    <code class="new">&lt;p&gt;&lt;a class="btn btn-success btn-lg" href="/start_post" role="button">Write Post&lt;/a&gt;&lt;/p&gt;</code><code>
    &lt;/div&gt;
&lt;/div&gt;

&lt;div class="container"&gt;
    {{ macros.list_items(posts=posts) }}
    &lt;hr&gt;
    {{ macros.footer() }}
&lt;/div&gt; &lt;!-- /container --&gt;
{% endblock %}

</code></pre>

macros.html
<pre><code>{% macro navbar() -%}
&lt;nav class="navbar navbar-inverse navbar-fixed-top"&gt;
    &lt;div class="container"&gt;
    &lt;div class="navbar-header"&gt;
        &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&gt;
        &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;a class="navbar-brand" href="/"&gt;Flask Posts&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="navbar" class="navbar-collapse collapse"&gt;
      &lt;ul class="nav navbar-nav"&gt;
        &lt;li class="active"&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;</code>
        <code class="old">&lt;li class=""&gt;&lt;a href="#"&gt;Write Post&lt;/a&gt;&lt;/li&gt;</code>
        <code class="new">&lt;li class=""&gt;&lt;a href="/start_post"&gt;Write Post&lt;/a&gt;&lt;/li&gt;</code><code>
      &lt;/ul&gt;
    &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
&lt;/nav&gt;
{%- endmacro %}

{% macro list_items(posts) -%}
&lt;div class="row"&gt;
{% for post in posts %}
&lt;div class="col-md-12"&gt;
    &lt;div class="well"&gt;
        &lt;h2&gt;{{ post['title'] }}&lt;/h2&gt;
        &lt;p&gt;{{ post['content'] }}&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
{% endfor %}
&lt;/div&gt;
{%- endmacro %}

{% macro footer() -%}
&lt;footer&gt;
    &lt;p&gt;UMBC Hackers&lt;/p&gt;
&lt;/footer&gt;
{%- endmacro %}

</code></pre>

<p>Whoo! Check it out you can now add a post to the page!</p>

<p>OK so now we should also add the ability to delete posts. Let's add a "delete" button.
All we need is to change our macro "list_items(posts)" in <code>macros.html</code>.</p>

<pre><code>{% macro navbar() -%}
&lt;nav class="navbar navbar-inverse navbar-fixed-top"&gt;
    &lt;div class="container"&gt;
    &lt;div class="navbar-header"&gt;
        &lt;button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"&gt;
        &lt;span class="sr-only"&gt;Toggle navigation&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;span class="icon-bar"&gt;&lt;/span&gt;
        &lt;/button&gt;
        &lt;a class="navbar-brand" href="/"&gt;Flask Posts&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="navbar" class="navbar-collapse collapse"&gt;
      &lt;ul class="nav navbar-nav"&gt;
        &lt;li class="active"&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
        &lt;li class=""&gt;&lt;a href="/start_post"&gt;Write Post&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;&lt;!--/.nav-collapse --&gt;
&lt;/nav&gt;
{%- endmacro %}

{% macro list_items(posts) -%}
&lt;div class="row"&gt;
{% for post in posts %}
&lt;div class="col-md-12"&gt;
    &lt;div class="well"&gt;
        &lt;h2&gt;{{ post['title'] }}&lt;/h2&gt;
        &lt;p&gt;{{ post['content'] }}&lt;/p&gt;</code>
        <code class="new">&lt;form action="/delete_post/{{ post['id'] }}" method="post"&gt;
            &lt;p&gt;&lt;input type="submit" class="btn btn-lg btn-danger" value="delete"&gt;&lt;/input&gt;&lt;/p&gt;
        &lt;/form&gt;</code><code>
    &lt;/div&gt;
&lt;/div&gt;
{% endfor %}
&lt;/div&gt;
{%- endmacro %}

{% macro footer() -%}
&lt;footer&gt;
    &lt;p&gt;UMBC Hackers&lt;/p&gt;
&lt;/footer&gt;
{%- endmacro %}

</code></pre>


<h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Done!</h3>

<p>YAY! You have finished your first Flask app! Hopefully it is just the first of many to come. Thank you for following along.</p>



      </section>
    </div>

    
  </body>
</html>
